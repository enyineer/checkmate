import { text, timestamp, uuid } from "drizzle-orm/pg-core";
import { pgSchema } from "drizzle-orm/pg-core";
import { getPluginSchemaName } from "@checkmate/drizzle-helper";
import { pluginMetadata } from "./plugin-metadata";

/**
 * Plugin-scoped schema using the standardized naming convention.
 * This ensures all tables are created in the plugin's isolated schema.
 */
const {{pluginNameCamel}}Schema = pgSchema(getPluginSchemaName(pluginMetadata.pluginId));

// Example schema - customize for your domain
export const {{pluginNameCamel}}Items = {{pluginNameCamel}}Schema.table("items", {
  id: uuid("id").primaryKey().defaultRandom(),
  name: text("name").notNull(),
  description: text("description"),
  createdAt: timestamp("created_at").notNull().defaultNow(),
  updatedAt: timestamp("updated_at").notNull().defaultNow(),
});

export type {{pluginNamePascal}}Item = typeof {{pluginNameCamel}}Items.$inferSelect;
export type New{{pluginNamePascal}}Item = typeof {{pluginNameCamel}}Items.$inferInsert;
